<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Algoritmo de Karatsuba</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Open+Sans+Condensed:ital,wght@0,300;1,300&family=Open+Sans:ital,wght@0,300;0,400;0,700;0,800;1,300;1,400;1,700;1,800&family=Oxygen+Mono&family=Poppins:ital,wght@0,300;0,700;1,300;1,700&display=swap">
        <link rel="stylesheet" href="assets/css/reset.css">
        <link rel="stylesheet" href="assets/css/highlight.css">
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/color.css">
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
        <script src="assets/js/highlight.js"></script>
        <script src="assets/js/script.js"></script>
    </head>
    <body>
        <div class="container">
            <header>
                <a href="">abrir tudo</a>
                <a href="">fechar tudo</a>
            </header>
            <main>

<h1>Algoritmo de Karatsuba</h1>
<div class="animation"><img class="frame" src="img/present/1.png" alt="1"><img class="frame" src="img/present/2.png" alt="2"><img class="frame" src="img/present/3.png" alt="3"><img class="frame" src="img/present/4.png" alt="4"><img class="frame" src="img/present/5.png" alt="5"><img class="frame" src="img/present/6.png" alt="6"></div>
<h2>Entendendo o Algoritmo</h2>
<p>Para entender o Algoritmo de Karatsuba, o jeito mais simples é fazendo as contas na mão e verificando se o resultado bate com o esperado.</p>
<p>Pegue uma calculadora e vamos lá, começaremos com algo simples.</p>
<blockquote class="question">
<p>Exercício 1</p>
<p>Primeiro, faça a seguinte multiplicalção: \(3408 \times 1735 = \,?\)</p>
<details class="answer">
<summary>Gabarito</summary>
<p>Você deve ter chegado em \(5.912.880\), se não, tem algo de errado com a sua calculadora…</p>
</details>
</blockquote>
<p>Maravilha, agora anote esse resultado em algum lugar para fazermos o algoritimo.</p>
<blockquote class="question">
<p>Karatsuba 1</p>
<p>A primeira coisa a se fazer é dividir os números \(3408 \text{ e } 1735\) em duas partes iguais</p>
<ul>
<li>Primeiro número em \(a \text{ e } b\);</li>
<li>Segundo número em \(c \text{ e } d\).</li>
</ul>
<details class="answer">
<summary>Gabarito</summary>
<ul>
<li>\(a = 34\)</li>
<li>\(b = 08\)</li>
<li>\(c = 17\)</li>
<li>\(d = 35\)</li>
</ul>
</details>
</blockquote>
<p>Fazemos isso para podermos simplificar as chamadas nos próximos passos.</p>
<blockquote class="question">
<p>Karatsuba 2</p>
<p>Agora, calcule \(P \text{ e } S\), que são respectivamente: \(a \times c \; \; e \; \; b \times d\);</p>
<details class="answer">
<summary>Gabarito</summary>
<ul>
<li>\(P: \; 34 \times 17 = \; 578\)</li>
<li>\(S: \; 08 \times 35 = \; 280\)</li>
</ul>
</details>
</blockquote>
<p>Note que multiplicamos as partes maiores entre si, e o mesmo é feito com as partes menores, isso não é em vão, o motivo pelo qual isso é feito ficará mais claro logo logo.</p>
<blockquote class="question">
<p>Karatsuba 3</p>
<p>Calcule  \(\; T \, = \; (a + b) \times (c + d)\).</p>
<details class="answer">
<summary>Gabarito</summary>
<p>\(T \,\): \(\; (34 + 08) \times (17 + 35) = \; 2184\)</p>
</details>
</blockquote>
<p>Agora, o nós teriamos que calcular \((ad + bc)\), porém, isso não parece muito viável, visto que adicionaria mais duas multiplicações para o nosso algoritimo. Portanto, usaremos utilizaremos um pequeno truque para nos ajudar.</p>
<p>O truque é o seguinte, iremos subtrair os termos \(P\text{ e }S\) de \(T\). Fazemos isso para trabalharmos apenas com subtrações.</p>
<blockquote class="question">
<p>Karatsuba 4</p>
<p>Faça o cálculo: \(\; T - S - P\) e chame o resultado de \(Q\).</p>
<details class="answer">
<summary>Gabarito</summary>
<p>\(Q \,\): \(\; T - S - P = \; 1326\)</p>
</details>
</blockquote>
<p>A razão desse truque funcionar é que \(T = ac + ad + bc + bd \text{ e } P=ac \text{, } S=bd\) e quanto fazemos a subtração, isso nos deixa apenas com os termos \((ad + bc)\) desejados. Coisa de doido, né?</p>
<p>Calma lá que já estamos no fim, nesse último passo tudo ficará mais claro!</p>
<blockquote class="question">
<p>Karatsuba 5</p>
<p>Realize a seguinte equação e verifique se os resultados batem.</p>
<p>\[R \, = \; P \times 10^n + Q \times 10^{n/2} + S\]</p>
<p>Sendo \(n\) o número de algarismos.</p>
<details class="answer">
<summary>Gabarito</summary>
<p>Você deve ter chegado em:
\[R: \; 578 \times 10^4 + 1326 \times 10^{4/2} + 280 = \; 5.912.880\]
O motivo de multiplicarmos \(P\text{ por } 10^n\) é para deslocarmos o número para seu local ideal, o mesmo é feito com \(Q\times 10^{n/2}\).</p>
</details>
</blockquote>
<p>Agora você deve estar pensando <em>“esse método é inútil… faço muito mais rápido na calculadora”</em>, mas não é exatamente assim que seu computador pensa! Antes de entender porque o algoritmo de karatsuba é mais rápido no computador precisamos analisar como ele seria construido em código.</p>
<p>Veja o pseudocódigo a seguir e analise-o:</p>
<pre><code class="language-py">def karatsuba(num1, num2):

    # Retorna a multiplicação caso o n seja menor que 1
    if (num1 &lt; 10) or (num2 &lt; 10)
        return num1 × num2
    
    # Calcula o tamanho dos números. 
    n = min(size_base10(num1), size_base10(num2))
    # Pega o menor número de algarismos e divide por 2 
    n2 = floor(n / 2) 
    
    # Separa os números em duas partes. 
    a, b = split_at(num1, n2)
    c, d = split_at(num2, n2)
    
    # 3 chamas recursivas feitas para números de aproximadamente metade do tamanho (n/2). 
    S = karatsuba(b, d)
    Q = karatsuba((b + a), (d + c))
    P = karatsuba(a, c)
    
    return (P × 10**(n2 × 2)) + ((Q - P - S) × 10**n2) + S
</code></pre>
<p><em>“Tá… continuo achando esse processo todo inútil, olha quanta linha pra fazer uma multiplicação comum!”</em>. Realmente ainda parece improvável que esse método seja mais rápido que uma multiplicação comum, mas não vá tirando conclusões precipitadas, ainda nem calculamos a complexidade do algoritimo!</p>
<blockquote class="question">
<p>Exercício</p>
<p>Vamos calcular a complexidade do algoritmo de karatsuba, lembra como faz?</p>
<blockquote class="warning">
<p>Dica</p>
<p>São três chamadas recursivas que recebem \(\frac{n}{2}\) como parâmetro.</p>
</blockquote>
<details class="answer">
<summary>Gabarito</summary>
<p>\[f(n) =
  \begin{cases}
    1       &amp; \quad \text{se } n \leq 1\text{;}\\
    3f(n/2) + n  &amp; \quad \text{se } n &gt; 1\text{.}\
  \end{cases}
\]</p>
<figure class="img"><img src="img/tree.png" alt=""></figure>
<p>Segundo a receita de complexidade vista em aula:</p>
<p>\[\frac{n}{2^{(h-2)}} &gt; 1\]</p>
<p>Disso segue que:</p>
<p>\[h &lt; \log_2{n} + 2\]</p>
<p>Agora, ao longo dos andares temos:</p>
<p>\[(n + n(3/2) + n(9/4) + ... + n(3/2)^{(h-2)}) + 3^{(h-1)} \]</p>
<p>O primeiro parentesês é uma soma de PG com:</p>
<ul>
<li>primeiro elemento \(n\);</li>
<li>razão \(3/2\);</li>
<li>número de elementos \(h-1\).</li>
</ul>
<p>Resultando em:</p>
<p>\[n * \frac{(3/2)^{(h-1)} - 1}{(3/2)-1} + 3^{(h-1)}\]</p>
<p>Simplicando, temos:</p>
<p>\[\frac{4n * \frac{3^h}{2^h} + 3^h}{3} - 2n\]</p>
<p>Agora, substituindo o \(h\) pelo encontrado anteriormente:</p>
<p>\[&lt; \frac{4n * \frac{3^{\log_2{n} + 2}}{2^{\log_2{n} + 2}} + 3^{\log_2{n} + 2}}{3} - 2n\]</p>
<p>\[&lt; \frac{4n * \frac{3^{\log_2{n}}*3^2}{n*2^2} + 3^{\log_2{n}} * 3^2}{3} - 2n\]</p>
<p>\[&lt; \frac{4n * \frac{3^{\log_2{n}}*9}{4n} + 3^{\log_2{n}} * 9}{3} - 2n\]</p>
<p>\[&lt; \frac{3^{\log_2{n}}*9 + 3^{\log_2{n}} * 9}{3} - 2n\]</p>
<p>\[&lt; 6*3^{\log_2{n}} - 2n\]</p>
<p>Com a mudança de base logaritimica:</p>
<p>\[&lt; 6*3^{\frac{\log_3{n}}{\log_3{2}}} - 2n\]</p>
<p>\[&lt; 6*n^{\frac{1}{\log_3{2}}} - 2n\]</p>
<p>\[&lt; 6*n^{\frac{1}{\frac{\log_2{2}}{\log_2{3}}}} - 2n\]</p>
<p>\[&lt; 6*n^{\log_2{3}} - 2n\]</p>
<p>Com isso chegamos numa complexidade:</p>
<p>\[O(n^{\log_2{3}}) \rightarrow O(n^{1.584})\]</p>
</details>
</blockquote>
<p>Olha só, chegamos em \(O(n^{1.584})\), acredita em mim agora que karatsuba consome menos tempo que uma multiplicação comum?</p>
<hr>
<!--1. listas;

2. ordenadas,

assim como

* listas;

* não-ordenadas

e imagens. Lembre que todas as imagens devem estar em uma subpasta *img*.

![](logo.png)

Para tabelas, usa-se a [notação do
MultiMarkdown](https://fletcher.github.io/MultiMarkdown-6/syntax/tables.html),
que é muito flexível. Vale a pena abrir esse link para saber todas as
possibilidades.

| coluna a | coluna b |
|----------|----------|
| 1        | 2        |

Ao longo de um texto, você pode usar *itálico*, **negrito**, {red}(vermelho) e
[[tecla]]. Também pode usar uma equação LaTeX: $f(n) \leq g(n)$. Se for muito
grande, você pode isolá-la em um parágrafo.

$$\lim_{n \rightarrow \infty} \frac{f(n)}{g(n)} \leq 1$$

Para inserir uma animação, use `md ;` seguido do nome de uma pasta onde as
imagens estão. Essa pasta também deve estar em *img*.

;bubble

Você também pode inserir código, inclusive especificando a linguagem.

``` py
def f():
    print('hello world')
```

``` c
void f() {
    printf("hello world\n");
}
```

Se não especificar nenhuma, o código fica com colorização de terminal.

```
hello world
```


!!! Aviso
Este é um exemplo de aviso, entre `md !!!`.
!!!


??? Exercício

Este é um exemplo de exercício, entre `md ???`.

::: Gabarito
Este é um exemplo de gabarito, entre `md :::`.
:::

???
-->

            </main>
            <footer>
                <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
                    <img alt="CC BY-SA 4.0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" title="Creative Commons Attribution-ShareAlike 4.0 International License"/>
                </a>
                © 2021 Marcelo Hashimoto
            </footer>
        </div>
    </body>
</html>
